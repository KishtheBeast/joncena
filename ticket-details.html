<!DOCTYPE html>
<html>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
    <link rel="icon" type="image/x-icon" href="ticket-master/favicon.ico">
    <meta name="viewport" content="user-scalable=0">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="ticket-master/style.css">
    <script>
        const linkElement = document.createElement('link');
        linkElement.rel = 'stylesheet';
        linkElement.type = 'text/css';
        const timestamp = new Date().getTime();
        const updatedCssUrl = `ticket-master/color.css?t=${timestamp}`;
        linkElement.href = updatedCssUrl;
        document.head.appendChild(linkElement);
    </script>
    <script>
        function openPopup() {
            document.getElementById('popupModal').style.display = 'block';
        }
    
        function closePopup() {
            document.getElementById('popupModal').style.display = 'none';
        }
    </script>
</head>
<body style="margin: 0;">
    <div style="text-align:center; margin-top: 60px; font-size: 40px; font-weight: 200;">One Way Ticket</div>
    <div style="display: flex; flex-direction: column; align-items: center; margin-top: 40px;">
        <div style="border-radius: 30px; border: 35px solid var(--first); display: inline-block; padding: 20px; margin-bottom: 20px;">
            <img class="qr-code" src="ticket-master/your-qr-code-image.png" alt="QR Code" style="width: 520px; height: 520px;">
        </div>
        <div style="width: 690px; height: 0; border-bottom: 4px dashed #e4e4e4; margin-bottom: 40px;"></div>
        <div class="ticket-info-rect" style="display: flex; flex-direction: column; align-items: center; width: 100%;">
            <div style="text-align:center; font-size: 64px; font-weight: bold; margin-top: 10px; color: #F44;">INTRASTATE</div>
            <div style="text-align:center; font-size: 190px; font-weight: 400; margin-top: 0px; cursor: pointer;" id="zone-number">11</div>
            <div style="text-align:center; font-size: 50px; font-weight: 100; font-family: 'SF Pro Display Medium', sans-serif; margin-top: 0px;">ZONE RIDE</div>
            <div style="text-align:center; font-size: 50px; font-weight: 100; font-family: 'SF Pro Display Medium', sans-serif; margin-top: 0px; margin-bottom: 290px;">1 Adult</div>
        </div>
    </div>

    <div style="flex: 1;"></div>
    <div style="width: 100%; position: fixed; left: 0; bottom: 100; background: #fff; z-index: 10; box-shadow: 0 -2px 16px rgba(0,0,0,0.04); padding-bottom: 0;">
        <div class="color-strip" style="margin: 0 auto 28px auto; height: 44px; width: 750px; display: flex; gap: 0;">
            <div class="color-block" style="background: var(--stripone); width: 33.3333%; height: 100%; border-radius: 0; margin: 0;"></div>
            <div class="color-block" style="background: var(--striptwo); width: 33.3333%; height: 100%; border-radius: 0; margin: 0;"></div>
            <div class="color-block" style="background: var(--stripthree); width: 33.3333%; height: 100%; border-radius: 0; margin: 0;"></div>
        </div>

        <div style="width: 670px; margin: 0 auto; margin-top: 22px; margin-bottom: 32px;">
            <div style="height: 6px; background: #E5E5E5; border-radius: 2px; position: relative; overflow: hidden;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: #0094FF; border-radius: 2px; transition: width 1s linear;"></div>
            </div>
        </div>
        <div style="text-align:center; font-size: 44px; font-weight: 400; margin-top: 0; margin-bottom: 32px;">
            Expires in <span id="countdown">60:00</span>
        </div>
        <div style="display: flex; justify-content: center; margin-top: 0; margin-bottom: 32px;">
            <button id="back-to-ticket-btn" style="background: #003E65; color: white; font-size: 32px; border: none; border-radius: 8px; padding: 24px 120px; font-family: 'SF Pro Display Medium', sans-serif; font-weight: 400; cursor: pointer; display: flex; align-items: center; gap: 16px;">
                <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: block;"><path d="M25 33L13 19L25 5" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span style="font-weight: 400;">Back to ticket</span>
            </button>
        </div>
    </div>
    <div id="popupModal" style="position: fixed;top: 19%;left: 52%;transform: translate(-50%, -50%);width: 100%;background-color: rgb(255, 255, 255);border: 2px solid rgb(204, 204, 204);box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 10px;padding: 20px 20px 20px 487px;height: 142%;display: none;">
                <img onclick="closePopup()" src="ticket-master/your-qr-code-image.png" alt="QR Code" style="width: 50%;object-fit: contain;padding-top: 130%;margin-bottom: 65px;">
                <a class="back-font">Tap to go back</a>
        </div>
    </div>
    <script>
        let adultCount = 1;
        function updateMonthAndYear() {
            const passElement = document.getElementById("pass_month_year");
            if (passElement) {
                passElement.innerHTML = `<span class='one-way-text'>One Way</span><br><span class='adult-count-text'>${adultCount} Adult${adultCount > 1 ? 's' : ''}</span>`;
            }
        }

        let deadlineDate = null;
        function updateDateTime() {
            const datetime = document.getElementById('datetime');
            if (!datetime) return;

            const currentDate = new Date();
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            const dateOptions = {
                weekday: 'long',
                month: 'long',
                day: '2-digit',
                year: 'numeric'
            };
            const timeString = currentDate.toLocaleTimeString('en-US', timeOptions).toUpperCase();
            const dateString = currentDate.toLocaleDateString('en-US', dateOptions);
            datetime.innerHTML = `${timeString}<br>${dateString}`;
        }

        function updateAdultCount() {
            adultCount = adultCount === 2 ? 1 : adultCount + 1;
            updateMonthAndYear();
        }

        updateMonthAndYear();
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // --- 60-minute countdown logic ---
        function setDeadline() {
            const now = new Date();
            window.deadlineDate = new Date(now.getTime() + 60 * 60 * 1000); // 60 minutes from now
        }

        function updateCountdown() {
            const countdown = document.getElementById('countdown');
            const progressBar = document.getElementById('progress-bar');
            if (!countdown) return;

            if (!window.deadlineDate) setDeadline();
            const now = new Date();
            let diff = Math.max(0, window.deadlineDate - now);
            const minutes = Math.floor(diff / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            countdown.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (diff <= 0) {
                countdown.textContent = '00:00';
            }
            // Progress bar logic (fill as time goes on)
            if (progressBar) {
                const total = 60 * 60 * 1000; // 60 minutes in ms
                const elapsed = total - diff;
                const percent = Math.min(1, Math.max(0, elapsed / total));
                progressBar.style.width = `${percent * 100}%`;
            }
        }
        setDeadline();
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- Zone number logic ---
        const zoneNumberDiv = document.getElementById('zone-number');
        if(zoneNumberDiv) {
            zoneNumberDiv.addEventListener('click', () => {
                let currentZone = parseInt(zoneNumberDiv.textContent, 10);
                currentZone = currentZone >= 11 ? 1 : currentZone + 1;
                zoneNumberDiv.textContent = currentZone;
            });
        }
        // --- Back to ticket button logic ---
        const backBtn = document.getElementById('back-to-ticket-btn');
        if (backBtn) {
            backBtn.addEventListener('click', function() {
                const target = new URL('index.html', window.location.href).href;
                window.location.assign(target);
            });
        }
    </script>
</body> 
</html>